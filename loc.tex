\chapter{位象: 无点拓扑学}

%\todo{变成单独的一章?}

常常拓扑空间的重点不在于\emph{点}, 而在于开集, 以及开集之间的关系.
将开集的性质提炼出来, 使其不再依赖于点, 就成为\emph{位象} (locales) 的概念. 它是介于拓扑空间和景之间的一个推广.\footnote{说位象是拓扑空间的 ``推广'' 不甚准确, 因为一般拓扑空间到位象的对应不是全忠实的 (有的空间开集太少). 但是 ``好'' 的空间范畴如 Hausdorff 空间范畴确实嵌入位象的范畴.}
位象理论又称为\emph{无点拓扑学} (pointless topology\footnote{双关笑话: 无点拓扑学不是 pointless (无用的).})

Andr\'e Joyal \cite{Joyal-Crash-Course} 建议在\topos{}理论之前先学习位象理论.

在高阶的观点中, 位象又可称作 $0$-\topos{}.

\newcommand{\fm}{位格}

\section{基本概念}

\begin{definition}
	{(\fm{})}
	\emph{\fm{}} (frame, 又称 local lattice)\footnotemark 是满足如下条件的偏序集:
	\begin{itemize}
		\item 存在有限交 $\wedge$ 与任意并 $\bigvee$, 其中一族元素的\emph{交} (meet) 是指同时小于等于这些元素的最大元, \emph{并} (join) 是指同时大于等于这些元素的最小元;
		\item 有结合律
		$$
		a \wedge \bigvee_{i \in I} b_i = \bigvee_{i \in I} (a \wedge b_i),
		$$
		其中 $I$ 是任意集合.
	\end{itemize}
	
	\fm{}的态射是偏序集之间保持有限交与任意并的态射. \fm{}的范畴记为 $\mathsf {Frm}$.
\end{definition}
\footnotetext{Frame 一词似乎没有通行的中文翻译. 这里试译为\fm{}, 因为它是一种与拓扑相关的格 (lattice).}
\begin{remark}
	{}
	由于任意交可由任意并表示,
	$$
	\bigwedge A = \bigvee \big\{ b \colon b\leq a \ \forall a\in A\big\},
	$$
	可以证明\fm{}中任意交也存在, 即\fm{}是\emph{完备格} (complete lattice). 但由定义, \fm{}的态射不一定保持任意交.
\end{remark}

\begin{definition}
	[label={locale-definition}]
	{(位象)}
	\emph{位象} (locale) 是\fm{}的形式对偶,
	即我们定义位象的范畴 $\mathsf {Loc}$ 是位格范畴 $\mathsf {Frm}$ 的对偶范畴.
	
	对于位象 $X$, 我们记对应的\fm{}为 $\mathcal O(X)$, 称其中的元素为 $X$ 的\emph{开子集}或\emph{开子空间}; 对于位象的态射 $f \colon X \to Y$,
	记对应的\fm{}的态射为 $f^* \colon \mathcal O(Y) \to \mathcal O(X)$.
\end{definition}

\begin{remark}
	{}
	\fm{}与位象的对偶类似于环与仿射概形的对偶,
	是代数--几何对偶的一例.
	%位象的定义中引入的记号都是为了体现这种对偶.
\end{remark}

\begin{example}
	{(拓扑空间作为位象)}
	拓扑空间 $X$ 的开集范畴 $\operatorname{Open}(X)$ 构成一个\fm{}.
	对于连续映射 $f \colon X \to Y$,
	我们有反向的\fm{}态射 $f^* \colon \operatorname{Open}(Y) \to \operatorname{Open}(X)$,
	将 $Y$ 的开集 $U$ 映射到 $X$ 的开集 $f^{-1}(U)$, 保持有限交与任意并.
	这构成了函子 $\operatorname{Open} \colon \mathsf {Top} \to \mathsf {Frm}^{\op}$; 由定义 $\mathsf {Loc} = \mathsf {Frm}^{\op}$, 我们得到函子 $$\operatorname{Open} \colon \mathsf {Top} \to \mathsf {Loc}.$$
\end{example}

\begin{example}
	{(环的谱作为位象)}
	在代数几何中, (交换) 环的谱 $\operatorname{Spec}A$ 是由 $A$ 的素理想的集合赋予 Zariski 拓扑定义的. 然而, 我们也可以直接刻画谱的 ``基础开集'' $U_f$ 生成的\fm, 从而不需要使用环的素理想\footnotemark:
	$$
	\mathcal O(\operatorname{Spec}A):= \big\langle U_f\colon f\in A\mid U_0 = \bot, U_1 = \top,
	U_{f+g} \leq U_f \vee U_g, U_{fg} = U_f \wedge U_g \big\rangle.
	$$
	(\fm{}就像群, 环等代数结构一样, 可使用生成元和关系刻画, 并且可由给定生成元的 ``自由代数'' 的商得到.)
	
	将 $U_f$ 想象为一个空间上函数 $f$ ``非零'' 的地方,
	$f+g$ 非零的地方包含于 $f$ 与 $g$ 各自非零的地方的并,
	而 $fg$ 非零的地方恰为两者的交.
	可以证明如此定义的位象 $\operatorname{Spec}A$ 正是传统上定义的拓扑空间 $\operatorname{Spec}A$.
\end{example}
\footnotetext{Jacob Lurie 在 \emph{Derived Algebraic Geometry V: Structured Spaces} 第 37 页写道, ``It is in some sense coincidental that $\operatorname{Spec} A$ is described by a topological space. What arises more canonically is the lattice of open subsets of $\operatorname{Spec} A$, which is generated by basic open sets of the form $U_f$. This lattice naturally forms a \emph{locale} ...'' \par
	值得一提的是, 构造主义数学青睐这种位象的观点, 因为环的素理想的存在性依赖选择公理. 关于构造主义数学与位象, 我们推荐读者观看 Andrej Bauer 的讲座. \url{https://www.youtube.com/watch?v=21qPOReu4FI}}

%\begin{example}
%	[label={complete-boolean-algebras}]
%	{(完备 Boole 代数)}
%	Boole 代数是满足如下条件的
%\end{example}

\begin{example}
	{(点作为位象)}
	单点空间 $\text{pt}$ 对应的位象记作 $1 = \operatorname{Open}(\text{pt})$.
	它对应的位格是两个元素的偏序集 $\mathcal O(1) = \{\bot,\top\}$.
	位象 $1$ 也称为\emph{终位象} (terminal locale).
\end{example}

% 下面的定义表明从位象中可以还原出 ``点'' 的概念.

\begin{definition}
	[label={points-of-locale}]
	{(位象的点)}
	定义位象 $X$ 的\emph{点}为位象的态射 $p\colon 1 \to X$.
	记位象 $X$ 的点的集合为 $\operatorname{Pt}(X)$.
\end{definition}

在\fm{}的层面, 位象 $X$ 的一个点 $p\colon 1 \to X$ 是保持有限交与任意并的态射 $p^*\colon \mathcal O(X) \to \{\bot,\top\}$.
考虑 $\top$ 的原像, 我们得到 $\mathcal O(X)$ 的一个\emph{完全素滤子} (completely prime filter). (偏序集中的\emph{滤子}是关于交封闭的向上封闭子集, 称 $F$ 为完全素滤子是指当 $\bigvee_i U_i \in F$ 时, 至少有一个 $U_i$ 属于 $F$.)

\begin{remark}
	{}
	滤子是理想的 ``对偶''. 我们有如下类比: 态射 $\mathcal O(X)\to \{\bot,\top\}$ 中 $\top$ 的原像是完全素滤子, 类似于环同态 $A\to k$ 的核是素理想 ($k$ 为整环). 位象 $X$ 的点对应 $\mathcal O(X)$ 的完全素滤子, 类似于谱 $\operatorname{Spec}A$ 的点对应环 $A$ 的素理想.
\end{remark}

对每个元素 $U\in\mathcal O(X)$, 规定 $\operatorname{Pt}(X)$ 的子集
$\{p \in \operatorname{Pt}(X) \colon p^*(U) = \top\}$ 为开集,
我们得到了 $\operatorname{Pt}(X)$ 上的一个拓扑. 于是有函子
$$\operatorname{Pt} \colon \mathsf {Loc} \to \mathsf {Top}.$$

\begin{prop}
	[label={top-loc-adjunction}]
	{}
	拓扑空间与位象之间有伴随
	% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXG1hdGhzZiB7VG9wfSJdLFsxLDAsIlxcbWF0aHNmIHtMb2N9Il0sWzAsMSwiXFxvcGVyYXRvcm5hbWV7T3Blbn0iLDAseyJvZmZzZXQiOi0yfV0sWzEsMCwiXFxvcGVyYXRvcm5hbWV7UHR9IiwwLHsib2Zmc2V0IjotMn1dLFsyLDMsIiIsMCx7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV1d
	\[\begin{tikzcd}[ampersand replacement=\&]
		{\mathsf {Top}} \& {\mathsf {Loc}.}
		\arrow[""{name=0, anchor=center, inner sep=0}, "{\operatorname{Open}}", shift left=2, from=1-1, to=1-2]
		\arrow[""{name=1, anchor=center, inner sep=0}, "{\operatorname{Pt}}", shift left=2, from=1-2, to=1-1]
		\arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=1]
	\end{tikzcd}\]
\end{prop}

上述伴随远远不是范畴等价; 首先, 从拓扑空间对应的位象中不一定能重构出原来的拓扑空间, 例如所有平凡拓扑对应的位象都是终位象 $1$.

然而, 对于分离性较好的空间, 其对应的位象确实能重构出这个空间:
\begin{definition}
	{(清晰空间)}
	设 $X$ 为拓扑空间. 若命题 \ref{top-loc-adjunction} 中伴随的单位 $X \to \operatorname{Pt}\operatorname{Open}(X)$ 是同胚,
	则称 $X$ 为\emph{清晰空间} (sober space\footnotemark). 换言之, 清晰空间的范畴是上述伴随给出的等价的满子范畴 (命题 \ref{adjoint-full-subcategory-equivalence}).
\end{definition}
\footnotetext{Sober 的原义是清醒, 未喝醉. 直观上一个 sober 空间中的点没有过于 ``糊在一起'', 清晰可辨.}

\begin{prop}
	{}
	Hausdorff ($T_2$) 空间都是清晰空间, 清晰空间都是 $T_0$ 空间; 而清晰与 $T_1$ 互不蕴涵, 例如 Sierpi\'nski 空间清晰而不 $T_1$, 无限集上的余有限拓扑 $T_1$ 而不清晰.
\end{prop}

另一方面, 从一个位象的所有点的信息也无法重构出这个位象: 下面的例子表明一个位象甚至可能没有点!

\begin{example}
	{(一个没有点的位象的例子)}
	设 $X$ 为拓扑空间. 对于开集 $U\subset X$, 定义 $\neg U$ 是 $U$ 的补集的内部.
	考虑偏序集
	$$
	\text{RO}(X)
	=
	\big\{U\in\operatorname{Open}(X)\mid U = \neg\neg U\big\},
	%P\mathbb{N}\big/ \sim,\quadA\sim B \Leftrightarrow A\setminus B, B\setminus A\text{为有限集}.
	%$$% 是 $\mathbb{N}$ 的子集在相差有限个元素的等价关系下构成的偏序集.
	$$
	称为 $X$ 的\emph{正则开集代数} (regular open algebra). 可以证明 $\text{RO}(X)$ 是一个\emph{完备 Boole 代数}\footnotemark (Boole 代数是有交, 并, 补运算的偏序集; 完备是指存在任意交和任意并).
	例如其中的任意并由下式给出:
	$$
	\bigvee_{i\in I}U_i = \neg\neg\Big(\bigcup_{i\in I}U_i\Big).
	$$
	由定义, 完备 Boole 代数是\fm.
	
	称偏序集中的一个元素为\emph{原子}, 是指除 $\bot$ 以外没有比它更小的元素. 若取空间 $X$ 为欧氏空间, 则 $\text{RO}(X)$ 没有原子 (任何正则开集内都有一个更小的正则开集).
	
	对任何完备 Boole 代数 $B$, 设 $P$ 是 $B$ 的完全素滤子,
	则 $\bigwedge P$ 是 $B$ 的原子. 这是因为, 假设 $x < \bigwedge P$,
	则 $x\notin P$, 从而由 $\top=x\vee\neg x\in P$, 得 $\neg x \in P$. 这说明 $x<\neg x$, 故 $x=\bot$.
	
	由上述论证, 存在一个完备 Boole 代数 $\text{RO}(X)$ 没有完全素滤子, 故我们得到了一个没有点的位象.
\end{example}
\footnotetext{\url{https://planetmath.org/regularopenalgebra}}

\subsection{子位象}

正如许多 ``空间'' 的概念 (拓扑空间, 向量空间, 概形 ...) 一样, 位象有一种自然的 ``子空间'' 的概念; 当然, 子位象不是通过点集, 而是通过开集的代数定义的.

\begin{definition}
	{(子位象)}
	设 $X$ 为位象. 定义 $X$ 的\emph{子位象} (sublocale) $Y$ 如下: $\mathcal O(Y)$ 为 $\mathcal O(X)$ 在一个保持交与任意并运算的等价关系 (即 $\mathcal O(X)\times\mathcal O(X)$ 的子\fm{}) $\equiv_Y$ 下的\emph{商}. 直观上, 这个等价关系是说两者与子空间的 ``交'' 相同.
	
	对于两个子位象 $Y,Z$, 若 $U\equiv_Z V \Rightarrow U\equiv_Y V$, 则称 $Y$ \emph{包含于} $Z$.
\end{definition}

子位象是\fm{}范畴 $\mathsf {Frm}$ 中的\emph{正则满射}, 即位象范畴 $\mathsf {Loc}$ 中的\emph{正则单射} (定义 \ref{regular-epi-and-mono}).

对于位象 $X$, $\mathcal O(X)$ 的元素可视为其开子空间.

\begin{definition}
	{(开子位象)}
	设 $X$ 为位象, $W\in\mathcal O(X)$. 定义 $X$ 的\emph{开子位象} $W$:
	$$U \equiv_W V \quad \text{当且仅当} \quad U\cap W = V \cap W.$$
\end{definition}



\subsection{测度与随机性}

本小节介绍 Alex Simpson 的文章 \cite{SIMPSON20121642} 引入的\emph{随机序列的位象}. 它是 $0$ 和 $1$ 组成的所有可数序列的空间的 ``子空间'', 但没有任何一个序列属于这个子空间, 因为 ``一个确定的序列永远不是随机序列''.

首先引入位象上的测度; 这是测度空间的一个推广. 设 $X$ 为位象, 其上的\emph{测度}是满足如下条件的函数 $\mu\colon \mathcal O(X)\to [0,+\infty]$:

\begin{definition}
	{(位象上的测度)}
	\begin{itemize}
		\item $\mu(\bot) = 0$,
		\item $x\leq y \Rightarrow \mu(x)\leq \mu(y)$,
		\item $\mu(x)+\mu(y)=\mu(x\vee y)+\mu(x\wedge y)$,
		\item 对任意 (可数) 递增序列 $x_1\leq x_2\leq\cdots$, $\mu(\bigvee_i x_i)=\sup_{i}\mu(x_i)$.
	\end{itemize}
	若 $\mu(\top)=1$, 称 $\mu$ 为\emph{概率测度}.
\end{definition}

\begin{propdef}
	{(随机元素的子位象)}
	设位象 $X$ 上有测度 $\mu$. 定义 $X$ 的 \emph{$\mu$-随机元素的子位象} $\operatorname{Ran}_\mu(X)$ 如下:
	$$
	U\equiv_{\operatorname{Ran}_\mu(X)} V \quad \text{当且仅当}\quad \mu(U\cap V) = \mu(U\cup V).
	$$
	可以验证 $\equiv_{\operatorname{Ran}_\mu(X)}$ 确实是一个等价关系; 直观上, 这个等价关系是相差一个 $\mu$-零测集.
\end{propdef}

\begin{prop}
	{}
	设 $X$ 为清晰空间, 带有测度 $\mu$, 则 $\operatorname{Ran}_\mu(X)$ 的点一一对应于 $X$ 的原子.
\end{prop}



\section{位象与逻辑}

\philoquote{[A locale is a] propositional geometric theory pretending to be a space.}{Steven Vickers}

建议在阅读本节之前阅读附录 \ref{first-order-languages} 节, 尤其关注几何逻辑的内容.

% frame = complete Heyting algebra (但作为范畴不同构)

我们将建立如下对应.

\begin{itemize}
	\item 位象 = 命题逻辑理论
	\item 开集 = 命题
	\item 点 = 模型
\end{itemize}

\subsection{经典命题逻辑与 Lindenbaum 代数}

设 $\Sigma$ 是由若干命题符号 $p,q,r,\cdots$ 组成的符号表\footnote{在定义 \ref{def-first-order-signature} 的框架中, 我们可以说 $\Sigma$ 包括 $0$ 个类型, $0$ 个函数符号 (固然, 因为 $\Sigma$ 中没有类型), 以及若干个 $0$ 元关系符号 $p,q,r,\cdots$.}.
定义 $\mathsf {Sen}_\Sigma$ 为 $\Sigma$ 上由 $\lor,\land,\neg,\Rightarrow,\top,\bot$ 组成的公式\footnote{这里的公式也可以放在定义 \ref{formula} 的框架中, 例如 $(p\land q)\Rightarrow r$, $p\lor\neg p$, $p\Rightarrow\bot$ 等等. 注意, 在这个框架中没有等式 $p=q$, 因为 $p,q$ 不是某个类型的项 ($\Sigma$ 中没有类型), 而是 $0$ 元关系符号.}的集合.
